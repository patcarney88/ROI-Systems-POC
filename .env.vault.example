################################################################################
# ROI SYSTEMS POC - SECURE ENVIRONMENT TEMPLATE (VAULT)
#
# This file serves as a template for production secret storage using dotenv-vault
# or similar encrypted environment variable solutions.
#
# SECURITY LEVELS:
# - Level 1 (Public): Configuration that can be in version control
# - Level 2 (Internal): Sensitive config not in version control
# - Level 3 (Secret): Encrypted secrets requiring vault/secret manager
# - Level 4 (Critical): Production-only secrets with additional controls
#
# WORKFLOW:
#   1. Development: Use .env.development (generated by scripts/generate-secrets.sh)
#   2. Staging: Use encrypted vault or AWS Secrets Manager
#   3. Production: Use AWS Secrets Manager + KMS encryption
#
# GENERATION:
#   Run: ./scripts/generate-secrets.sh <environment>
#
# VALIDATION:
#   Run: ./scripts/validate-secrets.sh <environment>
#
# ROTATION:
#   Run: ./scripts/rotate-secrets.sh <environment> all
################################################################################

################################################################################
# ENVIRONMENT CONFIGURATION (Level 1 - Public)
################################################################################
# Can be committed to version control
NODE_ENV=production
ENVIRONMENT=production

################################################################################
# APPLICATION CONFIGURATION (Level 1 - Public)
################################################################################
PORT=4000
API_VERSION=v1
LOG_LEVEL=info
LOG_FORMAT=json

################################################################################
# JWT AUTHENTICATION (Level 4 - Critical)
# REQUIREMENTS:
# - Minimum 64 characters (512 bits)
# - Cryptographically random
# - Unique per environment
# - Rotate every 90 days
#
# GENERATION:
#   openssl rand -base64 64
################################################################################
JWT_SECRET=REPLACE_WITH_CRYPTOGRAPHICALLY_SECURE_64_CHAR_SECRET
JWT_REFRESH_SECRET=REPLACE_WITH_DIFFERENT_64_CHAR_SECRET
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=30d
JWT_ALGORITHM=HS256

################################################################################
# DATABASE CREDENTIALS (Level 3 - Secret)
# REQUIREMENTS:
# - Minimum 32 characters
# - Mixed case, numbers, special characters
# - Unique per environment
# - Rotate every 90 days
#
# GENERATION:
#   openssl rand -base64 32
################################################################################
DB_USER=roi_user
DB_PASSWORD=REPLACE_WITH_SECURE_PASSWORD_MIN_32_CHARS
DB_NAME=roi_poc
DB_HOST=postgres
DB_PORT=5432
DB_SSL_MODE=require
DATABASE_URL=postgresql://roi_user:REPLACE_WITH_PASSWORD@postgres:5432/roi_poc?sslmode=require

# Database Pool Configuration (Level 1 - Public)
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=5000

################################################################################
# REDIS CACHE (Level 3 - Secret)
# REQUIREMENTS:
# - Minimum 32 characters
# - Alphanumeric and special characters
# - Rotate every 90 days
#
# GENERATION:
#   openssl rand -base64 32
################################################################################
REDIS_PASSWORD=REPLACE_WITH_SECURE_REDIS_PASSWORD_MIN_32_CHARS
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_URL=redis://default:REPLACE_WITH_PASSWORD@redis:6379/0

# Redis Configuration (Level 1 - Public)
REDIS_KEY_PREFIX=roi-poc:
REDIS_CONNECT_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=3000

################################################################################
# SESSION MANAGEMENT (Level 4 - Critical)
# REQUIREMENTS:
# - Minimum 64 characters
# - High entropy
# - Rotate every 90 days
#
# GENERATION:
#   openssl rand -base64 64
################################################################################
SESSION_SECRET=REPLACE_WITH_CRYPTOGRAPHICALLY_SECURE_64_CHAR_SESSION_SECRET
SESSION_NAME=roi-poc-session
SESSION_MAX_AGE=86400000
SESSION_SECURE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict

################################################################################
# ENCRYPTION KEYS (Level 4 - Critical)
# REQUIREMENTS:
# - Minimum 64 characters (512 bits for AES-256)
# - Cryptographically random
# - Rotate every 180 days
# - Store in KMS for production
#
# GENERATION:
#   openssl rand -hex 32 (for 256-bit key)
################################################################################
ENCRYPTION_KEY=REPLACE_WITH_64_CHAR_HEX_ENCRYPTION_KEY
ENCRYPTION_ALGORITHM=aes-256-gcm
ENCRYPTION_KEY_VERSION=1

################################################################################
# API KEYS & WEBHOOKS (Level 3 - Secret)
# REQUIREMENTS:
# - Minimum 48 characters
# - Unique per service
# - Rotate every 90 days
#
# GENERATION:
#   openssl rand -base64 48
################################################################################
INTERNAL_API_KEY=REPLACE_WITH_48_CHAR_INTERNAL_API_KEY
WEBHOOK_SECRET=REPLACE_WITH_48_CHAR_WEBHOOK_SECRET

################################################################################
# AWS CONFIGURATION (Level 3 - Secret)
# REQUIREMENTS:
# - Use IAM roles when possible (ECS, EKS)
# - Access keys as fallback only
# - Rotate every 90 days
# - Enable MFA for critical operations
################################################################################
AWS_REGION=us-east-1
AWS_ACCOUNT_ID=123456789012

# IAM Credentials (use IAM roles in production when possible)
AWS_ACCESS_KEY_ID=AKIA_REPLACE_WITH_ACTUAL_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=REPLACE_WITH_ACTUAL_SECRET_ACCESS_KEY

# KMS Configuration
KMS_KEY_ID=arn:aws:kms:us-east-1:123456789012:key/REPLACE_WITH_KMS_KEY_ID
KMS_KEY_ALIAS=alias/roi-poc-secrets

# S3 Buckets (Level 1 - Public)
S3_DOCUMENTS_BUCKET=roi-poc-documents-production
S3_ML_MODELS_BUCKET=roi-poc-ml-models-production
S3_BACKUPS_BUCKET=roi-poc-backups-production

################################################################################
# ELASTICSEARCH (Level 2 - Internal)
################################################################################
ELASTICSEARCH_URL=http://elasticsearch:9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=REPLACE_WITH_ELASTIC_PASSWORD
ES_INDEX_PREFIX=roi-poc-

################################################################################
# EXTERNAL SERVICES (Level 3 - Secret)
################################################################################

# Anthropic Claude API
ANTHROPIC_API_KEY=sk-ant-api03-REPLACE_WITH_ACTUAL_ANTHROPIC_API_KEY

# Email Service (SMTP)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=noreply@roi-systems.com
SMTP_PASS=REPLACE_WITH_SMTP_PASSWORD
EMAIL_FROM=noreply@roi-systems.com

# OAuth Providers (if enabled)
GOOGLE_CLIENT_ID=REPLACE_WITH_GOOGLE_CLIENT_ID
GOOGLE_CLIENT_SECRET=REPLACE_WITH_GOOGLE_CLIENT_SECRET
MICROSOFT_CLIENT_ID=REPLACE_WITH_MICROSOFT_CLIENT_ID
MICROSOFT_CLIENT_SECRET=REPLACE_WITH_MICROSOFT_CLIENT_SECRET

# Payment Processing (Stripe)
STRIPE_SECRET_KEY=sk_live_REPLACE_WITH_STRIPE_SECRET_KEY
STRIPE_WEBHOOK_SECRET=whsec_REPLACE_WITH_STRIPE_WEBHOOK_SECRET
STRIPE_PUBLISHABLE_KEY=pk_live_REPLACE_WITH_STRIPE_PUBLISHABLE_KEY

# SMS/Voice (Twilio)
TWILIO_ACCOUNT_SID=REPLACE_WITH_TWILIO_ACCOUNT_SID
TWILIO_AUTH_TOKEN=REPLACE_WITH_TWILIO_AUTH_TOKEN
TWILIO_PHONE_NUMBER=+15551234567

################################################################################
# MONITORING & OBSERVABILITY (Level 2 - Internal)
################################################################################

# Sentry
SENTRY_DSN=https://REPLACE_WITH_SENTRY_KEY@o123456.ingest.sentry.io/123456
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Datadog
DATADOG_API_KEY=REPLACE_WITH_DATADOG_API_KEY
DATADOG_APP_KEY=REPLACE_WITH_DATADOG_APP_KEY
DATADOG_SITE=datadoghq.com

# New Relic
NEW_RELIC_LICENSE_KEY=REPLACE_WITH_NEW_RELIC_LICENSE_KEY
NEW_RELIC_APP_NAME=ROI-Systems-POC-Production

################################################################################
# SECURITY CONFIGURATION (Level 1 - Public)
################################################################################

# CORS
CORS_ORIGIN=https://app.roi-systems.com
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# Rate Limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# Cookie Security
COOKIE_SECURE=true
COOKIE_HTTP_ONLY=true
COOKIE_SAME_SITE=strict
COOKIE_DOMAIN=.roi-systems.com

# Content Security Policy
CSP_ENABLED=true
CSP_REPORT_URI=/api/csp-report

# HSTS
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

################################################################################
# FEATURE FLAGS (Level 1 - Public)
################################################################################
ENABLE_ML_FEATURES=true
ENABLE_EMAIL_CAMPAIGNS=true
ENABLE_ANALYTICS=true
ENABLE_OAUTH_LOGIN=false
ENABLE_TWO_FACTOR_AUTH=true
ENABLE_API_DOCUMENTATION=false
ENABLE_DEBUG_MODE=false

################################################################################
# APPLICATION URLs (Level 1 - Public)
################################################################################
API_URL=https://api.roi-systems.com
WEB_URL=https://app.roi-systems.com
DOCS_URL=https://docs.roi-systems.com

# Public URLs (for frontend)
NEXT_PUBLIC_API_URL=https://api.roi-systems.com/graphql
NEXT_PUBLIC_WS_URL=wss://api.roi-systems.com/graphql
NEXT_PUBLIC_APP_URL=https://app.roi-systems.com

################################################################################
# SERVICE DISCOVERY (Level 1 - Public)
################################################################################
ML_API_URL=http://ml-api:8000
AUTH_SERVICE_URL=http://auth:5001
DOCUMENTS_SERVICE_URL=http://documents:5002

################################################################################
# SECRET ROTATION METADATA (Auto-generated)
################################################################################
SECRETS_VERSION=1.0.0
SECRETS_GENERATED_AT=2025-10-14T00:00:00Z
SECRETS_ROTATION_DUE=2026-01-14
SECRETS_LAST_ROTATED_BY=automation

################################################################################
# VAULT CONFIGURATION (if using dotenv-vault)
################################################################################
# DOTENV_VAULT_PRODUCTION=vault://prod/encrypted/secrets
# DOTENV_VAULT_STAGING=vault://staging/encrypted/secrets
# DOTENV_VAULT_DEVELOPMENT=vault://dev/encrypted/secrets

################################################################################
# USAGE INSTRUCTIONS
################################################################################
#
# DEVELOPMENT:
# 1. Copy this file: cp .env.vault.example .env.development
# 2. Generate secrets: ./scripts/generate-secrets.sh development
# 3. Validate: ./scripts/validate-secrets.sh development
# 4. Start services: docker-compose --env-file .env.development up
#
# STAGING:
# 1. Generate secrets: ./scripts/generate-secrets.sh staging
# 2. Upload to AWS Secrets Manager or use dotenv-vault
# 3. Configure CI/CD to fetch secrets
# 4. Deploy with secrets from vault
#
# PRODUCTION:
# 1. Generate secrets: ./scripts/generate-secrets.sh production
# 2. Upload to AWS Secrets Manager with KMS encryption
# 3. Configure ECS/EKS to fetch secrets from AWS Secrets Manager
# 4. Enable secret rotation via AWS Lambda
# 5. Monitor secret access via CloudTrail
#
################################################################################
# SECURITY REMINDERS
################################################################################
#
# ⚠️  NEVER commit actual secrets to version control
# ⚠️  Use different secrets for each environment
# ⚠️  Rotate secrets every 90 days (180 for encryption keys)
# ⚠️  Enable MFA for production secret access
# ⚠️  Monitor secret access logs regularly
# ⚠️  Encrypt secrets at rest (KMS, Vault, etc.)
# ⚠️  Use secret files instead of environment variables in production
# ⚠️  Implement secret scanning in CI/CD pipeline
# ⚠️  Have an incident response plan for secret compromise
# ⚠️  Document all secret dependencies
#
################################################################################
